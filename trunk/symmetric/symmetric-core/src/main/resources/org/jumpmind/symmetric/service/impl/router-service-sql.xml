<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:util="http://www.springframework.org/schema/util"
  xmlns:lang="http://www.springframework.org/schema/lang"
  xsi:schemaLocation="    
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd"
  default-lazy-init="true">    

  <util:map id="routerServiceSql">  
    <entry key="selectDataToBatchSql">
      <value><![CDATA[
        select d.data_id, d.table_name, d.event_type, d.row_data, d.pk_data, d.old_data,
        d.create_time, d.trigger_hist_id, d.channel_id, d.transaction_id, d.source_node_id, d.external_data, e.data_id from $[sym.sync.table.prefix]_data d left outer join
        $[sym.sync.table.prefix]_data_event e on d.data_id=e.data_id where d.channel_id=? and d.data_id > ? order by d.data_id asc
      ]]></value>
    </entry>  
    <entry key="selectDataUsingGapsSql">
      <value><![CDATA[
        select d.data_id, d.table_name, d.event_type, d.row_data, d.pk_data, d.old_data,
        d.create_time, d.trigger_hist_id, d.channel_id, d.transaction_id, d.source_node_id, d.external_data, '' from $[sym.sync.table.prefix]_data d 
         where d.channel_id=? and $(gap.clause) order by d.data_id asc
      ]]></value>
    </entry>      
    <entry key="selectDistinctDataIdFromDataEventSql">
      <value><![CDATA[
        select distinct(data_id) from $[sym.sync.table.prefix]_data_event where data_id > ? order by data_id asc
      ]]></value>
    </entry>
    <entry key="selectDistinctDataIdFromDataEventUsingGapsSql">
      <value><![CDATA[
        select distinct(data_id) from $[sym.sync.table.prefix]_data_event where data_id >=? and data_id <= ? order by data_id asc
      ]]></value>
    </entry>
    <entry key="selectUnroutedCountForChannelSql">
      <value><![CDATA[
        select count(*) from $[sym.sync.table.prefix]_data where channel_id=? and data_id >=? 
      ]]></value>
    </entry>
    <entry key="selectLastDataIdRoutedUsingDataRefSql">
      <value><![CDATA[
        select max(ref_data_id) from $[sym.sync.table.prefix]_data_ref 
      ]]></value>
    </entry>
    <entry key="selectLastDataIdRoutedUsingDataGapSql">
      <value><![CDATA[
        select max(end_id) from $[sym.sync.table.prefix]_data_gap 
      ]]></value>
    </entry>        
            
  </util:map>

</beans>