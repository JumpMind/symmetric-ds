<?xml version="1.0" encoding="UTF-8"?>
<appendix version="5.0" xml:id="xx-02-databases" xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:ns="http://docbook.org/ns/docbook"
         xmlns:mml="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml">
    <title>Database Notes</title>
    <para>
        Each database management system has its own characteristics that results in
        feature coverage in SymmetricDS.  The following table shows which features are available
        by database.
    </para>
    <para>
        <table>
            <title>Support by Database</title>
            <tgroup cols="7">
                <colspec colwidth="75px" />
                <colspec colwidth="65px" />
                <colspec colwidth="50px" />
                <colspec colwidth="50px" />
                <colspec colwidth="50px" />
                <colspec colwidth="50px" />
                <colspec colwidth="50px" />
                <thead>
                    <row>
                        <entry>Database</entry>
                        <entry>Versions supported</entry>
                        <entry>Transaction Identifier</entry>
                        <entry>Fallback Update</entry>
                        <entry>Conditional Sync</entry>
                        <entry>BLOB Sync</entry>
                        <entry>CLOB Sync</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>Oracle</entry>
                        <entry>8.1.7 and above</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                    </row>
                    <row>
                        <entry>MySQL</entry>
                        <entry>5.0.2 and above</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                    </row>
                    <row>
                        <entry>PostgreSQL</entry>
                        <entry>8.2.5 and above</entry>
                        <entry>N</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                    </row>
                    <row>
                        <entry>SQL Server</entry>
                        <entry>2005</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                        <entry>Y</entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
    </para>
    <section>
        <title>Oracle</title>
        <para>
            On Oracle RAC, sequences should be ordered so data is processed in the correct order.
            To offset the performance cost of ordering, the sequences should also be cached.
        </para>
    </section>
    <section>
        <title>MySQL</title>
        <para>
            A database engine that supports transactions, such as the InnoDB engine, is required.
            On Windows, when the MySQL installer prompts for the default storage engine, select InnoDB.
            On Unix, the default storage engine is MyISAM.  The following line must be added to the
            <filename>my.cnf</filename> file:
            <programlisting>default-storage_engine = innodb</programlisting>
        </para>
    </section>
    <section>
        <title>PostgreSQL</title>
        <para>
            There is no transaction identifier support included with PostgreSQL 8.1.
            We may include a library in the future that can be added to PostgreSQL to provide
            the transaction identifier.
        </para>
        <para>
            The plpgsql language handler must be installed on the database where SymmetricDS
            is running.  The following statements should be run by the administrator on the database:
            
            <programlisting><![CDATA[
CREATE FUNCTION plpgsql_call_handler() RETURNS language_handler AS
    '$libdir/plpgsql' LANGUAGE C;

CREATE FUNCTION plpgsql_validator(oid) RETURNS void AS
    '$libdir/plpgsql' LANGUAGE C;

CREATE TRUSTED PROCEDURAL LANGUAGE plpgsql
    HANDLER plpgsql_call_handler
    VALIDATOR plpgsql_validator;
            ]]></programlisting>
            
        </para>
    </section>
    <section>
        <title>MS SQL Server</title>
        <para>
        </para>
    </section>

</appendix>
