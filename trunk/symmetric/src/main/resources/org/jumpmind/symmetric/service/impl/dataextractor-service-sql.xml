<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="    
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd"
  default-lazy-init="true">

  <util:map id="dataExtractorServiceSql">
    <entry key="selectEventDataToExtractSql">
      <value>
        select d.data_id, d.table_name, d.event_type, d.row_data, d.pk_data, d.old_data,
        d.create_time, d.trigger_hist_id, d.channel_id, d.transaction_id, d.source_node_id, e.router_id from $[sym.sync.table.prefix]_data d inner join
        $[sym.sync.table.prefix]_data_event e on d.data_id = e.data_id inner join $[sym.sync.table.prefix]_outgoing_batch o on o.batch_id=e.batch_id 
        where o.node_id = ? and o.batch_id = ? order by d.data_id asc
      </value>
    </entry>
  </util:map>

</beans>