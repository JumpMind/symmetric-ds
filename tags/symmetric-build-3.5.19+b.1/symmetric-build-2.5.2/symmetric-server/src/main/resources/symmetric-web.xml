<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<bean id="pingUriHandler" class="org.jumpmind.symmetric.web.PingUriHandler">
	    <property name="parameterService" ref="parameterService" />	
		<property name="uriPattern" value="/ping/*" />
	</bean>

	<bean id="infoUriHandler" class="org.jumpmind.symmetric.web.InfoUriHandler">
		<property name="uriPattern" value="/info/*" />
		<property name="nodeService" ref="nodeService" />
		<property name="parameterService" ref="parameterService" />
		<property name="configurationService" ref="configurationService" />
	</bean>

	<bean id="bandwidthSamplerUriHandler" class="org.jumpmind.symmetric.web.BandwidthSamplerUriHandler">
		<property name="parameterService" ref="parameterService" />
		<property name="uriPattern" value="/bandwidth/*" />
	</bean>

	<bean id="pullUriHandler" class="org.jumpmind.symmetric.web.PullUriHandler">
	    <property name="parameterService" ref="parameterService" />
		<property name="nodeService" ref="nodeService" />
		<property name="configurationService" ref="configurationService" />
		<property name="registrationService" ref="registrationService" />
		<property name="dataExtractorService" ref="dataExtractorService" />
		<property name="statisticManager" ref="statisticManager" />
		<property name="uriPattern" value="/pull/*" />
		<property name="interceptors">
			<list>
				<ref bean="authenticationInterceptor" />
				<ref bean="nodeConcurrencyInterceptor" />
			</list>
		</property>
	</bean>

	<bean id="pushUriHandler" class="org.jumpmind.symmetric.web.PushUriHandler">
	    <property name="parameterService" ref="parameterService" />	
		<property name="dataLoaderService" ref="dataLoaderService" />
		<property name="statisticManager" ref="statisticManager" />
		<property name="uriPattern" value="/push/*" />
		<property name="interceptors">
			<list>
				<ref bean="authenticationInterceptor" />
				<ref bean="nodeConcurrencyInterceptor" />
			</list>
		</property>
	</bean>

	<bean id="registrationUriHandler" class="org.jumpmind.symmetric.web.RegistrationUriHandler">
		<property name="registrationService" ref="registrationService" />
		<property name="parameterService" ref="parameterService" />
		<property name="uriPattern" value="/registration/*" />
	    <property name="interceptors">
			<list>
				<ref bean="nodeConcurrencyInterceptor" />
			</list>
		</property>
	</bean>

	<bean id="ackUriHandler" class="org.jumpmind.symmetric.web.AckUriHandler">
	    <property name="parameterService" ref="parameterService" />
		<property name="acknowledgeService" ref="acknowledgeService" />
		<property name="uriPattern" value="/ack/*" />
		<property name="interceptors">
			<list>
				<ref bean="authenticationInterceptor" />
			</list>
		</property>
	</bean>

	<bean id="batchUriHandler" class="org.jumpmind.symmetric.web.BatchUriHandler">
	    <property name="parameterService" ref="parameterService" />
		<property name="dataExtractorService" ref="dataExtractorService" />
		<property name="uriPattern" value="/batch/*" />
		<property name="enabled" value="$[sym.web.batch.servlet.enable]" />
	</bean>

	<bean id="authenticationInterceptor" class="org.jumpmind.symmetric.web.AuthenticationInterceptor">
		<property name="nodeService" ref="nodeService" />
	</bean>

	<bean id="nodeConcurrencyInterceptor" class="org.jumpmind.symmetric.web.NodeConcurrencyInterceptor">
		<property name="concurrentConnectionManager" ref="concurrentConnectionManager" />
		<property name="configurationService" ref="configurationService" />
		<property name="statisticManager" ref="statisticManager" />
	</bean>

</beans>