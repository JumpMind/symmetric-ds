<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="    
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd"
  default-lazy-init="true">

  <util:map id="configurationServiceSql">
    <entry key="selectDataEventActionsByIdSql">
      <value>
        select data_event_action from $[sym.sync.table.prefix]_node_group_link where
        source_node_group_id = ? and target_node_group_id = ?
      </value>
    </entry>
    <entry key="groupsLinksSql">
      <value>
        select source_node_group_id, target_node_group_id, data_event_action from
        $[sym.sync.table.prefix]_node_group_link
      </value>
    </entry>
    <entry key="updateNodeGroupSql">
      <value>
        update $[sym.sync.table.prefix]_node_group set description=? where
          node_group_id=?
      </value>
    </entry> 
    <entry key="insertNodeGroupSql">
      <value>
        insert into $[sym.sync.table.prefix]_node_group 
          (description, node_group_id) values(?,?)
      </value>
    </entry> 
    
    <entry key="updateNodeGroupLinkSql">
      <value>
        update $[sym.sync.table.prefix]_node_group_link set data_event_action=? where
          source_node_group_id=? and target_node_group_id=?
      </value>
    </entry> 
    <entry key="insertNodeGroupLinkSql">
      <value>
        insert into $[sym.sync.table.prefix]_node_group_link 
          (data_event_action, source_node_group_id, target_node_group_id) values(?,?,?)
      </value>
    </entry> 
    <entry key="selectNodeGroupsSql">
      <value>
        select node_group_id, description from $[sym.sync.table.prefix]_node_group
      </value>
    </entry>    
    <entry key="groupsLinksForSql">
      <value>
        select source_node_group_id, target_node_group_id, data_event_action from
        $[sym.sync.table.prefix]_node_group_link where source_node_group_id = ?
      </value>
    </entry>
    <entry key="isChannelInUseSql">
      <value>
        select count(*) from $[sym.sync.table.prefix]_trigger where channel_id = ?
      </value>
    </entry>    
    <entry key="selectChannelsSql">
      <value>
        select c.channel_id, nc.node_id, nc.ignore_enabled, nc.suspend_enabled, c.processing_order,
        c.max_batch_size, c.enabled, c.max_batch_to_send, c.max_data_to_route, c.use_old_data_to_route, c.use_row_data_to_route, c.use_pk_data_to_route, c.contains_big_lob, c.batch_algorithm, nc.last_extract_time, c.extract_period_millis
        from $[sym.sync.table.prefix]_channel c left outer join
        $[sym.sync.table.prefix]_node_channel_ctl nc on c.channel_id = nc.channel_id and nc.node_id = ?
        order by c.processing_order asc, c.channel_id
      </value>
    </entry>
    <entry key="selectNodeChannelControlLastExtractTimeSql">
      <value>
        select channel_id, last_extract_time
        from $[sym.sync.table.prefix]_node_channel_ctl where node_id = ?
        order by channel_id
      </value>
    </entry>
    <entry key="insertChannelSql">
      <value>
        insert into $[sym.sync.table.prefix]_channel (channel_id, processing_order, max_batch_size,
        max_batch_to_send, max_data_to_route, use_old_data_to_route, use_row_data_to_route, use_pk_data_to_route, contains_big_lob, enabled, batch_algorithm, description, extract_period_millis)
        values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, null,? )
      </value>
    </entry>
    <entry key="updateChannelSql">
      <value>
        update $[sym.sync.table.prefix]_channel set processing_order=?, max_batch_size=?,
        max_batch_to_send=?, max_data_to_route=?, use_old_data_to_route=?, use_row_data_to_route=?, 
        use_pk_data_to_route=?, contains_big_lob=?, enabled=?, batch_algorithm=?, extract_period_millis=? where channel_id=?
      </value>
    </entry>
    <entry key="deleteNodeGroupLinkSql">
      <value>delete from $[sym.sync.table.prefix]_node_group_link where source_node_group_id=? and target_node_group_id=?</value>
    </entry>    
    <entry key="deleteNodeGroupSql">
      <value>delete from $[sym.sync.table.prefix]_node_group where node_group_id=?</value>
    </entry>    
    <entry key="deleteChannelSql">
      <value>delete from $[sym.sync.table.prefix]_channel where channel_id=?</value>
    </entry>
    <entry key="deleteNodeChannelSql">
      <value>delete from $[sym.sync.table.prefix]_node_channel_ctl where channel_id=?</value>
    </entry>    
    <entry key="selectNodeGroupChannelWindowSql">
      <value>
        select node_group_id, channel_id, start_time, end_time, enabled  
        from $[sym.sync.table.prefix]_node_group_channel_window where node_group_id=? and channel_id=?
      </value>
    </entry>
    <entry key="insertNodeChannelControlSql">
      <value>
        insert into $[sym.sync.table.prefix]_node_channel_ctl (node_id, channel_id,
        suspend_enabled, ignore_enabled,last_extract_time) values (?, ?, ?, ?, ?)
      </value>
    </entry>
    <entry key="updateNodeChannelControlSql">
      <value>
        update $[sym.sync.table.prefix]_node_channel_ctl set 
        suspend_enabled=?, ignore_enabled=?, last_extract_time=? where node_id=? and channel_id=?
      </value>
    </entry>
   
  </util:map>
</beans>